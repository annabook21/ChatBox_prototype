<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900">
  <defs>
    <style>
      .title { font: 700 24px sans-serif; fill: #232F3E; }
      .label { font: 600 16px sans-serif; fill: #232F3E; }
      .small { font: 12px sans-serif; fill: #232F3E; }
      .box { fill: #FFFFFF; stroke: #707070; stroke-width: 2; rx: 8; }
      .edge { stroke: #666; stroke-width: 2; marker-end: url(#arrow); fill: none; }
      .note { fill: #F6F6F6; stroke: #CCCCCC; stroke-width: 1; rx: 6; }
      .section { fill: #F9FBFF; stroke: #D5E3FF; stroke-width: 2; rx: 10; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#666" />
    </marker>
  </defs>

  <rect x="20" y="20" width="1360" height="860" fill="#fff" stroke="#e0e0e0"/>
  <text x="40" y="60" class="title">AWS Contextual Chatbot - Full Architecture (Multi-Region with DR)</text>

  <!-- Global Frontend -->
  <rect x="80" y="90" width="1240" height="180" class="section"/>
  <text x="100" y="120" class="label">Global Frontend</text>
  <rect x="220" y="140" width="300" height="80" class="box"/>
  <text x="370" y="170" class="label" text-anchor="middle">CloudFront (Global)</text>
  <text x="370" y="190" class="small" text-anchor="middle">Origin Group: S3 (us-west-2) → S3 (us-east-1) on 5xx</text>

  <rect x="570" y="140" width="300" height="80" class="box"/>
  <text x="720" y="170" class="label" text-anchor="middle">S3 Frontend (us-west-2)</text>
  <text x="720" y="190" class="small" text-anchor="middle">Private via OAC</text>

  <rect x="900" y="140" width="300" height="80" class="box"/>
  <text x="1050" y="170" class="label" text-anchor="middle">S3 Frontend (us-east-1)</text>
  <text x="1050" y="190" class="small" text-anchor="middle">Private via OAC</text>

  <path class="edge" d="M520,180 C 560,180 560,180 570,180"/>
  <path class="edge" d="M520,180 C 860,180 860,180 900,180"/>

  <!-- Backend Regions -->
  <rect x="80" y="300" width="600" height="520" class="section"/>
  <text x="100" y="330" class="label">Primary Region (us-west-2)</text>

  <rect x="120" y="360" width="520" height="120" class="box"/>
  <text x="380" y="395" class="label" text-anchor="middle">API Gateway</text>
  <text x="380" y="420" class="small" text-anchor="middle">/docs, /upload, /ingestion-status, /health</text>

  <rect x="120" y="500" width="520" height="100" class="box"/>
  <text x="380" y="540" class="small" text-anchor="middle">Lambdas: Query, Upload, Ingestion, Status, Health</text>

  <rect x="120" y="620" width="250" height="80" class="box"/>
  <text x="245" y="655" class="small" text-anchor="middle">Bedrock Knowledge Base</text>

  <rect x="390" y="620" width="250" height="80" class="box"/>
  <text x="515" y="655" class="small" text-anchor="middle">S3 Documents (Versioned)</text>

  <rect x="740" y="300" width="600" height="520" class="section"/>
  <text x="760" y="330" class="label">Failover Region (us-east-1)</text>

  <rect x="780" y="360" width="520" height="120" class="box"/>
  <text x="1040" y="395" class="label" text-anchor="middle">API Gateway</text>
  <text x="1040" y="420" class="small" text-anchor="middle">/docs, /upload, /ingestion-status, /health</text>

  <rect x="780" y="500" width="520" height="100" class="box"/>
  <text x="1040" y="540" class="small" text-anchor="middle">Lambdas: Query, Upload, Ingestion, Status, Health</text>

  <rect x="780" y="620" width="250" height="80" class="box"/>
  <text x="905" y="655" class="small" text-anchor="middle">Bedrock Knowledge Base</text>

  <rect x="1050" y="620" width="250" height="80" class="box"/>
  <text x="1175" y="655" class="small" text-anchor="middle">S3 Documents (Replica)</text>

  <path class="edge" d="M640,660 C 900,660 900,660 1050,660"/>
  <text x="845" y="645" class="small" text-anchor="middle">S3 Cross-Region Replication (CRR)</text>

  <!-- Route 53 Health Checks -->
  <rect x="580" y="240" width="240" height="40" class="note"/>
  <text x="700" y="265" class="small" text-anchor="middle">Route 53 monitors /health every 30s (3 fails → failover)</text>

  <!-- Notes -->
  <rect x="80" y="830" width="1240" height="40" class="note"/>
  <text x="700" y="855" class="small" text-anchor="middle">Frontend DR: CloudFront origin failover (< 1s) | Backend DR: Route 53 DNS failover (~2–3m) | SPA routing: 404 → /index.html</text>
</svg>


