{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"BackendStack":{"id":"BackendStack","path":"BackendStack","children":{"knowledgeBase":{"id":"knowledgeBase","path":"BackendStack/knowledgeBase","children":{"Role":{"id":"Role","path":"BackendStack/knowledgeBase/Role","children":{"ImportRole":{"id":"ImportRole","path":"BackendStack/knowledgeBase/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/knowledgeBase/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"aws:SourceAccount":{"Ref":"AWS::AccountId"}},"ArnLike":{"aws:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":knowledge-base/*"]]}}},"Effect":"Allow","Principal":{"Service":"bedrock.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Ref":"knowledgeBaseKBVectorsAOSSApiAccessAll053431A3"}],"roleName":"AmazonBedrockExecutionRoleForKnowledgeBaseBackenddgeBase80E07476"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/knowledgeBase/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/knowledgeBase/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:InvokeModel","Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/amazon.titan-embed-text-v1"]]}},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"knowledgeBaseRoleDefaultPolicy372C7B66","roles":[{"Ref":"knowledgeBaseRoleEEC71BA3"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"KBVectors":{"id":"KBVectors","path":"BackendStack/knowledgeBase/KBVectors","children":{"EncryptionPolicy":{"id":"EncryptionPolicy","path":"BackendStack/knowledgeBase/KBVectors/EncryptionPolicy","attributes":{"aws:cdk:cloudformation:type":"AWS::OpenSearchServerless::SecurityPolicy","aws:cdk:cloudformation:props":{"name":"encryptionpolicybacktors1fc1218c","policy":"{\"Rules\":[{\"ResourceType\":\"collection\",\"Resource\":[\"collection/vectorstorebackenectors1fc1218c\"]}],\"AWSOwnedKey\":true}","type":"encryption"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchserverless.CfnSecurityPolicy","version":"2.189.1"}},"NetworkPolicy":{"id":"NetworkPolicy","path":"BackendStack/knowledgeBase/KBVectors/NetworkPolicy","attributes":{"aws:cdk:cloudformation:type":"AWS::OpenSearchServerless::SecurityPolicy","aws:cdk:cloudformation:props":{"name":"networkpolicybackectors1fc1218c","policy":"[{\"Rules\":[{\"ResourceType\":\"collection\",\"Resource\":[\"collection/vectorstorebackenectors1fc1218c\"]},{\"ResourceType\":\"dashboard\",\"Resource\":[\"collection/vectorstorebackenectors1fc1218c\"]}],\"AllowFromPublic\":true}]","type":"network"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchserverless.CfnSecurityPolicy","version":"2.189.1"}},"VectorCollection":{"id":"VectorCollection","path":"BackendStack/knowledgeBase/KBVectors/VectorCollection","attributes":{"aws:cdk:cloudformation:type":"AWS::OpenSearchServerless::Collection","aws:cdk:cloudformation:props":{"name":"vectorstorebackenectors1fc1218c","standbyReplicas":"ENABLED","tags":[{"key":"Name","value":"vectorstorebackenectors1fc1218c"},{"key":"Type","value":"VectorCollection"}],"type":"VECTORSEARCH"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchserverless.CfnCollection","version":"2.189.1"}},"AOSSApiAccessAll":{"id":"AOSSApiAccessAll","path":"BackendStack/knowledgeBase/KBVectors/AOSSApiAccessAll","children":{"ImportedAOSSApiAccessAll":{"id":"ImportedAOSSApiAccessAll","path":"BackendStack/knowledgeBase/KBVectors/AOSSApiAccessAll/ImportedAOSSApiAccessAll","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/knowledgeBase/KBVectors/AOSSApiAccessAll/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::ManagedPolicy","aws:cdk:cloudformation:props":{"description":"","path":"/","policyDocument":{"Statement":[{"Action":"aoss:APIAccessAll","Effect":"Allow","Resource":{"Fn::GetAtt":["knowledgeBaseKBVectorsVectorCollectionD6F54897","Arn"]}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnManagedPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.ManagedPolicy","version":"2.189.1","metadata":[]}},"IsDataAccessPolicyNotEmpty":{"id":"IsDataAccessPolicyNotEmpty","path":"BackendStack/knowledgeBase/KBVectors/IsDataAccessPolicyNotEmpty","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.189.1"}},"DataAccessPolicy":{"id":"DataAccessPolicy","path":"BackendStack/knowledgeBase/KBVectors/DataAccessPolicy","attributes":{"aws:cdk:cloudformation:type":"AWS::OpenSearchServerless::AccessPolicy","aws:cdk:cloudformation:props":{"name":"dataaccesspolicybacktors1fc1218c","policy":{"Fn::Join":["",["[{\"Rules\":[{\"Resource\":[\"collection/vectorstorebackenectors1fc1218c\"],\"Permission\":[\"aoss:DescribeCollectionItems\",\"aoss:CreateCollectionItems\",\"aoss:UpdateCollectionItems\"],\"ResourceType\":\"collection\"},{\"Resource\":[\"index/vectorstorebackenectors1fc1218c/*\"],\"Permission\":[\"aoss:UpdateIndex\",\"aoss:DescribeIndex\",\"aoss:ReadDocument\",\"aoss:WriteDocument\",\"aoss:CreateIndex\"],\"ResourceType\":\"index\"}],\"Principal\":[\"",{"Fn::GetAtt":["knowledgeBaseRoleEEC71BA3","Arn"]},"\"],\"Description\":\"\"}]"]]},"type":"data"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchserverless.CfnAccessPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"@cdklabs/generative-ai-cdk-constructs.opensearchserverless.VectorCollection","version":"0.1.296","metadata":[]}},"KBIndex":{"id":"KBIndex","path":"BackendStack/knowledgeBase/KBIndex","children":{"ManageIndexPolicy":{"id":"ManageIndexPolicy","path":"BackendStack/knowledgeBase/KBIndex/ManageIndexPolicy","attributes":{"aws:cdk:cloudformation:type":"AWS::OpenSearchServerless::AccessPolicy","aws:cdk:cloudformation:props":{"name":"manageindexpolicybacdex3572e59b","policy":{"Fn::Join":["",["[{\"Rules\":[{\"Resource\":[\"index/vectorstorebackenectors1fc1218c/*\"],\"Permission\":[\"aoss:DescribeIndex\",\"aoss:CreateIndex\",\"aoss:DeleteIndex\",\"aoss:UpdateIndex\"],\"ResourceType\":\"index\"},{\"Resource\":[\"collection/vectorstorebackenectors1fc1218c\"],\"Permission\":[\"aoss:DescribeCollectionItems\"],\"ResourceType\":\"collection\"}],\"Principal\":[\"",{"Fn::GetAtt":["OpenSearchIndexCRProviderCRRole466FC04E","Arn"]},"\"],\"Description\":\"\"}]"]]},"type":"data"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_opensearchserverless.CfnAccessPolicy","version":"2.189.1"}},"VectorIndex":{"id":"VectorIndex","path":"BackendStack/knowledgeBase/KBIndex/VectorIndex","children":{"Default":{"id":"Default","path":"BackendStack/knowledgeBase/KBIndex/VectorIndex/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"@cdklabs/generative-ai-cdk-constructs.opensearch_vectorindex.VectorIndex","version":"0.1.296","metadata":[]}},"MyCfnKnowledgeBase":{"id":"MyCfnKnowledgeBase","path":"BackendStack/knowledgeBase/MyCfnKnowledgeBase","attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::KnowledgeBase","aws:cdk:cloudformation:props":{"knowledgeBaseConfiguration":{"type":"VECTOR","vectorKnowledgeBaseConfiguration":{"embeddingModelArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},"::foundation-model/amazon.titan-embed-text-v1"]]},"embeddingModelConfiguration":{"bedrockEmbeddingModelConfiguration":{"embeddingDataType":"FLOAT32"}}}},"name":"KBBackendStacowledgeBase80E07476","roleArn":{"Fn::GetAtt":["knowledgeBaseRoleEEC71BA3","Arn"]},"storageConfiguration":{"type":"OPENSEARCH_SERVERLESS","opensearchServerlessConfiguration":{"collectionArn":{"Fn::GetAtt":["knowledgeBaseKBVectorsVectorCollectionD6F54897","Arn"]},"fieldMapping":{"vectorField":"bedrock-knowledge-base-default-vector","textField":"AMAZON_BEDROCK_TEXT_CHUNK","metadataField":"AMAZON_BEDROCK_METADATA"},"vectorIndexName":"bedrock-knowledge-base-default-index"}}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnKnowledgeBase","version":"2.189.1"}},"KBCRPolicy":{"id":"KBCRPolicy","path":"BackendStack/knowledgeBase/KBCRPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/knowledgeBase/KBCRPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:CreateKnowledgeBase","Effect":"Allow","Resource":"*"},{"Action":["bedrock:DeleteKnowledgeBase","bedrock:TagResource","bedrock:UpdateKnowledgeBase"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":bedrock:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":knowledge-base/*"]]}},{"Action":"iam:PassRole","Effect":"Allow","Resource":{"Fn::GetAtt":["knowledgeBaseRoleEEC71BA3","Arn"]}}],"Version":"2012-10-17"},"policyName":"knowledgeBaseKBCRPolicyE95EF16F","roles":[{"Ref":"knowledgeBaseRoleEEC71BA3"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"@cdklabs/generative-ai-cdk-constructs.bedrock.VectorKnowledgeBase","version":"0.1.296","metadata":[]}},"OpenSearchIndexCRProvider":{"id":"OpenSearchIndexCRProvider","path":"BackendStack/OpenSearchIndexCRProvider","children":{"CRRole":{"id":"CRRole","path":"BackendStack/OpenSearchIndexCRProvider/CRRole","children":{"ImportCRRole":{"id":"ImportCRRole","path":"BackendStack/OpenSearchIndexCRProvider/CRRole/ImportCRRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/OpenSearchIndexCRProvider/CRRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Ref":"knowledgeBaseKBVectorsAOSSApiAccessAll053431A3"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"CustomResourcesFunction":{"id":"CustomResourcesFunction","path":"BackendStack/OpenSearchIndexCRProvider/CustomResourcesFunction","children":{"Code":{"id":"Code","path":"BackendStack/OpenSearchIndexCRProvider/CustomResourcesFunction/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/OpenSearchIndexCRProvider/CustomResourcesFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/OpenSearchIndexCRProvider/CustomResourcesFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/OpenSearchIndexCRProvider/CustomResourcesFunction/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"a3fe4b26ec49b4430d0ff27c86004dd592790de9e0fbce450905ca4157bd62d3.zip"},"description":"Custom Resource Provider","handler":"custom_resources.on_event","memorySize":128,"role":{"Fn::GetAtt":["OpenSearchIndexCRProviderCRRole466FC04E","Arn"]},"runtime":"python3.12","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}},"LogRetention":{"id":"LogRetention","path":"BackendStack/OpenSearchIndexCRProvider/CustomResourcesFunction/LogRetention","children":{"Resource":{"id":"Resource","path":"BackendStack/OpenSearchIndexCRProvider/CustomResourcesFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.189.1"}},"LogGroup":{"id":"LogGroup","path":"BackendStack/OpenSearchIndexCRProvider/CustomResourcesFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.189.1","metadata":[]}},"ProviderRole":{"id":"ProviderRole","path":"BackendStack/OpenSearchIndexCRProvider/ProviderRole","children":{"ImportProviderRole":{"id":"ImportProviderRole","path":"BackendStack/OpenSearchIndexCRProvider/ProviderRole/ImportProviderRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/OpenSearchIndexCRProvider/ProviderRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/OpenSearchIndexCRProvider/ProviderRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/OpenSearchIndexCRProvider/ProviderRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["OpenSearchIndexCRProviderCustomResourcesFunction4F9ADEA2","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["OpenSearchIndexCRProviderCustomResourcesFunction4F9ADEA2","Arn"]},":*"]]}]},{"Action":"lambda:GetFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["OpenSearchIndexCRProviderCustomResourcesFunction4F9ADEA2","Arn"]}}],"Version":"2012-10-17"},"policyName":"OpenSearchIndexCRProviderProviderRoleDefaultPolicy9810CB1F","roles":[{"Ref":"OpenSearchIndexCRProviderProviderRole87B4E831"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Provider":{"id":"Provider","path":"BackendStack/OpenSearchIndexCRProvider/Provider","children":{"framework-onEvent":{"id":"framework-onEvent","path":"BackendStack/OpenSearchIndexCRProvider/Provider/framework-onEvent","children":{"Code":{"id":"Code","path":"BackendStack/OpenSearchIndexCRProvider/Provider/framework-onEvent/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/OpenSearchIndexCRProvider/Provider/framework-onEvent/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/OpenSearchIndexCRProvider/Provider/framework-onEvent/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/OpenSearchIndexCRProvider/Provider/framework-onEvent/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"bdc104ed9cab1b5b6421713c8155f0b753380595356f710400609664d3635eca.zip"},"description":"AWS CDK resource provider framework - onEvent (BackendStack/OpenSearchIndexCRProvider/Provider)","environment":{"variables":{"USER_ON_EVENT_FUNCTION_ARN":{"Fn::GetAtt":["OpenSearchIndexCRProviderCustomResourcesFunction4F9ADEA2","Arn"]}}},"handler":"framework.onEvent","role":{"Fn::GetAtt":["OpenSearchIndexCRProviderProviderRole87B4E831","Arn"]},"runtime":"nodejs20.x","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}},"LogRetention":{"id":"LogRetention","path":"BackendStack/OpenSearchIndexCRProvider/Provider/framework-onEvent/LogRetention","children":{"Resource":{"id":"Resource","path":"BackendStack/OpenSearchIndexCRProvider/Provider/framework-onEvent/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.189.1"}},"LogGroup":{"id":"LogGroup","path":"BackendStack/OpenSearchIndexCRProvider/Provider/framework-onEvent/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.custom_resources.Provider","version":"2.189.1"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","children":{"Code":{"id":"Code","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"ServiceRole":{"id":"ServiceRole","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e":{"id":"docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e","children":{"Resource":{"id":"Resource","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":10,"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.189.1"}},"Policy":{"id":"Policy","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e/Policy","children":{"Resource":{"id":"Resource","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]},"/*"]]}]},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.189.1","metadata":[]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.1","metadata":[]}},"Notifications":{"id":"Notifications","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e/Notifications","children":{"Resource":{"id":"Resource","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e/Notifications/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"AllowBucketNotificationsToBackendStackIngestionJob56CF52D5":{"id":"AllowBucketNotificationsToBackendStackIngestionJob56CF52D5","path":"BackendStack/docsbucket-fd54d1e1-d8f8-4a59-84b2-92d19502b20e/AllowBucketNotificationsToBackendStackIngestionJob56CF52D5","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["IngestionJob878E4082","Arn"]},"principal":"s3.amazonaws.com","sourceAccount":{"Ref":"AWS::AccountId"},"sourceArn":{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.189.1","metadata":[]}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"BackendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"BackendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"Role":{"id":"Role","path":"BackendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}},"Handler":{"id":"Handler","path":"BackendStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.189.1"}},"drbucket-6dad05d2-c979-4f04-9bfc-d53e11a10315":{"id":"drbucket-6dad05d2-c979-4f04-9bfc-d53e11a10315","path":"BackendStack/drbucket-6dad05d2-c979-4f04-9bfc-d53e11a10315","children":{"Resource":{"id":"Resource","path":"BackendStack/drbucket-6dad05d2-c979-4f04-9bfc-d53e11a10315/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":10,"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.189.1"}},"Policy":{"id":"Policy","path":"BackendStack/drbucket-6dad05d2-c979-4f04-9bfc-d53e11a10315/Policy","children":{"Resource":{"id":"Resource","path":"BackendStack/drbucket-6dad05d2-c979-4f04-9bfc-d53e11a10315/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"drbucket6dad05d2c9794f049bfcd53e11a103155F4E6BFD"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["drbucket6dad05d2c9794f049bfcd53e11a103155F4E6BFD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["drbucket6dad05d2c9794f049bfcd53e11a103155F4E6BFD","Arn"]},"/*"]]}]},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["drbucket6dad05d2c9794f049bfcd53e11a103155F4E6BFD","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["drbucket6dad05d2c9794f049bfcd53e11a103155F4E6BFD","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.189.1","metadata":[]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"BackendStack/drbucket-6dad05d2-c979-4f04-9bfc-d53e11a10315/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"BackendStack/drbucket-6dad05d2-c979-4f04-9bfc-d53e11a10315/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.189.1","metadata":[]}},"ReplicationRole":{"id":"ReplicationRole","path":"BackendStack/ReplicationRole","children":{"ImportReplicationRole":{"id":"ImportReplicationRole","path":"BackendStack/ReplicationRole/ImportReplicationRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/ReplicationRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"s3.amazonaws.com"}}],"Version":"2012-10-17"},"path":"/service-role/"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/ReplicationRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/ReplicationRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObjectVersionAcl","s3:GetObjectVersionForReplication","s3:GetObjectVersionTagging"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]},"/*"]]}},{"Action":["s3:GetReplicationConfiguration","s3:ListBucket"],"Effect":"Allow","Resource":{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]}},{"Action":["s3:ReplicateDelete","s3:ReplicateObject","s3:ReplicateTags"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["drbucket6dad05d2c9794f049bfcd53e11a103155F4E6BFD","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"ReplicationRoleDefaultPolicy80AD15BB","roles":[{"Ref":"ReplicationRoleCE149CEC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"MyCfnBucket":{"id":"MyCfnBucket","path":"BackendStack/MyCfnBucket","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"replicationConfiguration":{"role":{"Fn::GetAtt":["ReplicationRoleCE149CEC","Arn"]},"rules":[{"destination":{"bucket":{"Fn::GetAtt":["drbucket6dad05d2c9794f049bfcd53e11a103155F4E6BFD","Arn"]}},"status":"Enabled"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.189.1"}},"s3DataSource":{"id":"s3DataSource","path":"BackendStack/s3DataSource","children":{"DataSource":{"id":"DataSource","path":"BackendStack/s3DataSource/DataSource","attributes":{"aws:cdk:cloudformation:type":"AWS::Bedrock::DataSource","aws:cdk:cloudformation:props":{"dataSourceConfiguration":{"type":"S3","s3Configuration":{"bucketArn":{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]}}},"knowledgeBaseId":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseId"]},"name":"docs","vectorIngestionConfiguration":{"chunkingConfiguration":{"chunkingStrategy":"FIXED_SIZE","fixedSizeChunkingConfiguration":{"maxTokens":500,"overlapPercentage":20}}}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_bedrock.CfnDataSource","version":"2.189.1"}}},"constructInfo":{"fqn":"@cdklabs/generative-ai-cdk-constructs.bedrock.S3DataSource","version":"0.1.296","metadata":[]}},"CreateWebDataSourceHandler":{"id":"CreateWebDataSourceHandler","path":"BackendStack/CreateWebDataSourceHandler","children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/CreateWebDataSourceHandler/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/CreateWebDataSourceHandler/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/CreateWebDataSourceHandler/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/CreateWebDataSourceHandler/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/CreateWebDataSourceHandler/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock:CreateDataSource","bedrock:DeleteDataSource","bedrock:UpdateDataSource"],"Effect":"Allow","Resource":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseArn"]}}],"Version":"2012-10-17"},"policyName":"CreateWebDataSourceHandlerServiceRoleDefaultPolicyFC922D1E","roles":[{"Ref":"CreateWebDataSourceHandlerServiceRoleB3C6B543"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Code":{"id":"Code","path":"BackendStack/CreateWebDataSourceHandler/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/CreateWebDataSourceHandler/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/CreateWebDataSourceHandler/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/CreateWebDataSourceHandler/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"c2cded17ce3c088185635e1d52c76160eccf18983db054a84ed565af267a5449.zip"},"environment":{"variables":{"KNOWLEDGE_BASE_ID":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseId"]}}},"functionName":"create-web-data-source","handler":"index.handler","role":{"Fn::GetAtt":["CreateWebDataSourceHandlerServiceRoleB3C6B543","Arn"]},"runtime":"nodejs18.x","timeout":60}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.189.1","metadata":[]}},"WebDataSourceProvider":{"id":"WebDataSourceProvider","path":"BackendStack/WebDataSourceProvider","children":{"framework-onEvent":{"id":"framework-onEvent","path":"BackendStack/WebDataSourceProvider/framework-onEvent","children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/WebDataSourceProvider/framework-onEvent/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/WebDataSourceProvider/framework-onEvent/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/WebDataSourceProvider/framework-onEvent/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/WebDataSourceProvider/framework-onEvent/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/WebDataSourceProvider/framework-onEvent/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["CreateWebDataSourceHandlerAA0170AE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CreateWebDataSourceHandlerAA0170AE","Arn"]},":*"]]}]},{"Action":"lambda:GetFunction","Effect":"Allow","Resource":{"Fn::GetAtt":["CreateWebDataSourceHandlerAA0170AE","Arn"]}}],"Version":"2012-10-17"},"policyName":"WebDataSourceProviderframeworkonEventServiceRoleDefaultPolicy0D954923","roles":[{"Ref":"WebDataSourceProviderframeworkonEventServiceRole576075FE"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Code":{"id":"Code","path":"BackendStack/WebDataSourceProvider/framework-onEvent/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/WebDataSourceProvider/framework-onEvent/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/WebDataSourceProvider/framework-onEvent/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/WebDataSourceProvider/framework-onEvent/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"bdc104ed9cab1b5b6421713c8155f0b753380595356f710400609664d3635eca.zip"},"description":"AWS CDK resource provider framework - onEvent (BackendStack/WebDataSourceProvider)","environment":{"variables":{"USER_ON_EVENT_FUNCTION_ARN":{"Fn::GetAtt":["CreateWebDataSourceHandlerAA0170AE","Arn"]}}},"handler":"framework.onEvent","role":{"Fn::GetAtt":["WebDataSourceProviderframeworkonEventServiceRole576075FE","Arn"]},"runtime":"nodejs20.x","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}},"LogRetention":{"id":"LogRetention","path":"BackendStack/WebDataSourceProvider/framework-onEvent/LogRetention","children":{"Resource":{"id":"Resource","path":"BackendStack/WebDataSourceProvider/framework-onEvent/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.189.1"}},"LogGroup":{"id":"LogGroup","path":"BackendStack/WebDataSourceProvider/framework-onEvent/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.custom_resources.Provider","version":"2.189.1"}},"WebDataSourceResource":{"id":"WebDataSourceResource","path":"BackendStack/WebDataSourceResource","children":{"Default":{"id":"Default","path":"BackendStack/WebDataSourceResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.1","metadata":[]}},"IngestionJob":{"id":"IngestionJob","path":"BackendStack/IngestionJob","children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/IngestionJob/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/IngestionJob/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/IngestionJob/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/IngestionJob/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/IngestionJob/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:StartIngestionJob","Effect":"Allow","Resource":[{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]},{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseArn"]}]}],"Version":"2012-10-17"},"policyName":"IngestionJobServiceRoleDefaultPolicyEE1C0469","roles":[{"Ref":"IngestionJobServiceRole82BC1069"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Code":{"id":"Code","path":"BackendStack/IngestionJob/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/IngestionJob/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/IngestionJob/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/IngestionJob/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"2cfa1fbf290e298f0582344e57a0899b6f61902831d999ce06ac5b28ab5d72da.zip"},"environment":{"variables":{"KNOWLEDGE_BASE_ID":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseId"]},"DATA_SOURCE_ID":{"Fn::GetAtt":["s3DataSourceAA732D64","DataSourceId"]},"BUCKET_ARN":{"Fn::GetAtt":["docsbucketfd54d1e1d8f84a5984b292d19502b20e6DC07C8F","Arn"]}}},"functionName":"start-ingestion-trigger","handler":"index.handler","role":{"Fn::GetAtt":["IngestionJobServiceRole82BC1069","Arn"]},"runtime":"nodejs20.x","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.189.1","metadata":[]}},"BucketNotificationsHandler050a0587b7544547bf325f094a3db834":{"id":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834","path":"BackendStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834","children":{"Role":{"id":"Role","path":"BackendStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role","children":{"ImportRole":{"id":"ImportRole","path":"BackendStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutBucketNotification","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36","roles":[{"Ref":"BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/BucketNotificationsHandler050a0587b7544547bf325f094a3db834/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"CrawlJob":{"id":"CrawlJob","path":"BackendStack/CrawlJob","children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/CrawlJob/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/CrawlJob/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/CrawlJob/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/CrawlJob/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/CrawlJob/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:StartIngestionJob","Effect":"Allow","Resource":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseArn"]}}],"Version":"2012-10-17"},"policyName":"CrawlJobServiceRoleDefaultPolicy2B45D309","roles":[{"Ref":"CrawlJobServiceRole9FE61FAB"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Code":{"id":"Code","path":"BackendStack/CrawlJob/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/CrawlJob/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/CrawlJob/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/CrawlJob/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"5d8ace1ed5f63e1bcbe8b13d67b6c7b0693dda8f8b11ea9e5f7c826f9b5477d5.zip"},"environment":{"variables":{"KNOWLEDGE_BASE_ID":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseId"]},"DATA_SOURCE_ID":{"Fn::GetAtt":["WebDataSourceResource","DataSourceId"]}}},"functionName":"start-web-crawl-trigger","handler":"index.handler","role":{"Fn::GetAtt":["CrawlJobServiceRole9FE61FAB","Arn"]},"runtime":"nodejs20.x","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.189.1","metadata":[]}},"ScheduleWebCrawlRule":{"id":"ScheduleWebCrawlRule","path":"BackendStack/ScheduleWebCrawlRule","children":{"Resource":{"id":"Resource","path":"BackendStack/ScheduleWebCrawlRule/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"scheduleExpression":"rate(1 day)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["CrawlJobC65D0915","Arn"]}}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.189.1"}},"AllowEventRuleBackendStackCrawlJobC6FAC4E7":{"id":"AllowEventRuleBackendStackCrawlJobC6FAC4E7","path":"BackendStack/ScheduleWebCrawlRule/AllowEventRuleBackendStackCrawlJobC6FAC4E7","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CrawlJobC65D0915","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["ScheduleWebCrawlRule6D2888EE","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.189.1","metadata":[]}},"UpdateWebUrls":{"id":"UpdateWebUrls","path":"BackendStack/UpdateWebUrls","children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/UpdateWebUrls/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/UpdateWebUrls/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/UpdateWebUrls/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/UpdateWebUrls/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/UpdateWebUrls/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock:GetDataSource","bedrock:UpdateDataSource"],"Effect":"Allow","Resource":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseArn"]}}],"Version":"2012-10-17"},"policyName":"UpdateWebUrlsServiceRoleDefaultPolicyE8DF2C55","roles":[{"Ref":"UpdateWebUrlsServiceRole453F5863"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Code":{"id":"Code","path":"BackendStack/UpdateWebUrls/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/UpdateWebUrls/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/UpdateWebUrls/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/UpdateWebUrls/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"7a4f65a1e4ca82f9b6081a15b9f21292750af08b81246635f00feb015dda95ea.zip"},"environment":{"variables":{"KNOWLEDGE_BASE_ID":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseId"]},"DATA_SOURCE_ID":{"Fn::GetAtt":["WebDataSourceResource","DataSourceId"]},"DATA_SOURCE_NAME":"WebCrawlerDataSource"}},"functionName":"update-web-crawl-urls","handler":"index.handler","role":{"Fn::GetAtt":["UpdateWebUrlsServiceRole453F5863","Arn"]},"runtime":"nodejs20.x","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.189.1","metadata":[]}},"GetWebUrls":{"id":"GetWebUrls","path":"BackendStack/GetWebUrls","children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/GetWebUrls/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/GetWebUrls/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/GetWebUrls/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/GetWebUrls/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/GetWebUrls/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"bedrock:GetDataSource","Effect":"Allow","Resource":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseArn"]}}],"Version":"2012-10-17"},"policyName":"GetWebUrlsServiceRoleDefaultPolicy42A1F148","roles":[{"Ref":"GetWebUrlsServiceRole4EFA5A3A"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Code":{"id":"Code","path":"BackendStack/GetWebUrls/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/GetWebUrls/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/GetWebUrls/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/GetWebUrls/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"28d1df80a8a436a4a08e5d3c70a90cb550dc2ebdadfa8f2591c841368470aab3.zip"},"environment":{"variables":{"KNOWLEDGE_BASE_ID":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseId"]},"DATA_SOURCE_ID":{"Fn::GetAtt":["WebDataSourceResource","DataSourceId"]}}},"functionName":"get-web-crawl-urls","handler":"index.handler","role":{"Fn::GetAtt":["GetWebUrlsServiceRole4EFA5A3A","Arn"]},"runtime":"nodejs20.x","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.189.1","metadata":[]}},"rag":{"id":"rag","path":"BackendStack/rag","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"API for RAG","name":"rag-api"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.189.1"}},"Deployment":{"id":"Deployment","path":"BackendStack/rag/Deployment","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Deployment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"API for RAG","restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.189.1","metadata":[]}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"BackendStack/rag/DeploymentStage.prod","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/DeploymentStage.prod/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ragDeployment82271D10f04d6624fd5777b2cc3d509afa66aa60"},"restApiId":{"Ref":"rag8F750088"},"stageName":"prod"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.189.1","metadata":[]}},"Endpoint":{"id":"Endpoint","path":"BackendStack/rag/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.189.1"}},"Default":{"id":"Default","path":"BackendStack/rag/Default","children":{"OPTIONS":{"id":"OPTIONS","path":"BackendStack/rag/Default/OPTIONS","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Default/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["rag8F750088","RootResourceId"]},"restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.189.1","metadata":[]}},"docs":{"id":"docs","path":"BackendStack/rag/Default/docs","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Default/docs/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["rag8F750088","RootResourceId"]},"pathPart":"docs","restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.189.1"}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/rag/Default/docs/OPTIONS","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Default/docs/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ragdocsFC765487"},"restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.189.1","metadata":[]}},"POST":{"id":"POST","path":"BackendStack/rag/Default/docs/POST","children":{"ApiPermission.BackendStackrag73B9B129.POST..docs":{"id":"ApiPermission.BackendStackrag73B9B129.POST..docs","path":"BackendStack/rag/Default/docs/POST/ApiPermission.BackendStackrag73B9B129.POST..docs","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["Query435140A1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"rag8F750088"},"/",{"Ref":"ragDeploymentStageprodFFA9FBE9"},"/POST/docs"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.189.1"}},"ApiPermission.Test.BackendStackrag73B9B129.POST..docs":{"id":"ApiPermission.Test.BackendStackrag73B9B129.POST..docs","path":"BackendStack/rag/Default/docs/POST/ApiPermission.Test.BackendStackrag73B9B129.POST..docs","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["Query435140A1","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"rag8F750088"},"/test-invoke-stage/POST/docs"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/rag/Default/docs/POST/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["Query435140A1","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ragdocsFC765487"},"restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.189.1","metadata":[]}},"web-urls":{"id":"web-urls","path":"BackendStack/rag/Default/web-urls","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Default/web-urls/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["rag8F750088","RootResourceId"]},"pathPart":"web-urls","restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.189.1"}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/rag/Default/web-urls/OPTIONS","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Default/web-urls/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ragweburlsAA40FEE3"},"restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.189.1","metadata":[]}},"POST":{"id":"POST","path":"BackendStack/rag/Default/web-urls/POST","children":{"ApiPermission.BackendStackrag73B9B129.POST..web-urls":{"id":"ApiPermission.BackendStackrag73B9B129.POST..web-urls","path":"BackendStack/rag/Default/web-urls/POST/ApiPermission.BackendStackrag73B9B129.POST..web-urls","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateWebUrlsBE5108CE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"rag8F750088"},"/",{"Ref":"ragDeploymentStageprodFFA9FBE9"},"/POST/web-urls"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.189.1"}},"ApiPermission.Test.BackendStackrag73B9B129.POST..web-urls":{"id":"ApiPermission.Test.BackendStackrag73B9B129.POST..web-urls","path":"BackendStack/rag/Default/web-urls/POST/ApiPermission.Test.BackendStackrag73B9B129.POST..web-urls","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateWebUrlsBE5108CE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"rag8F750088"},"/test-invoke-stage/POST/web-urls"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/rag/Default/web-urls/POST/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["UpdateWebUrlsBE5108CE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ragweburlsAA40FEE3"},"restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.189.1","metadata":[]}},"urls":{"id":"urls","path":"BackendStack/rag/Default/urls","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Default/urls/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["rag8F750088","RootResourceId"]},"pathPart":"urls","restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.189.1"}},"OPTIONS":{"id":"OPTIONS","path":"BackendStack/rag/Default/urls/OPTIONS","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/Default/urls/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ragurlsA8D221EA"},"restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.189.1","metadata":[]}},"GET":{"id":"GET","path":"BackendStack/rag/Default/urls/GET","children":{"ApiPermission.BackendStackrag73B9B129.GET..urls":{"id":"ApiPermission.BackendStackrag73B9B129.GET..urls","path":"BackendStack/rag/Default/urls/GET/ApiPermission.BackendStackrag73B9B129.GET..urls","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetWebUrls64A9507B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"rag8F750088"},"/",{"Ref":"ragDeploymentStageprodFFA9FBE9"},"/GET/urls"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.189.1"}},"ApiPermission.Test.BackendStackrag73B9B129.GET..urls":{"id":"ApiPermission.Test.BackendStackrag73B9B129.GET..urls","path":"BackendStack/rag/Default/urls/GET/ApiPermission.Test.BackendStackrag73B9B129.GET..urls","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetWebUrls64A9507B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"rag8F750088"},"/test-invoke-stage/GET/urls"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/rag/Default/urls/GET/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetWebUrls64A9507B","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"ragurlsA8D221EA"},"restApiId":{"Ref":"rag8F750088"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.189.1","metadata":[]}},"usage-plan":{"id":"usage-plan","path":"BackendStack/rag/usage-plan","children":{"Resource":{"id":"Resource","path":"BackendStack/rag/usage-plan/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::UsagePlan","aws:cdk:cloudformation:props":{"apiStages":[{"apiId":{"Ref":"rag8F750088"},"stage":{"Ref":"ragDeploymentStageprodFFA9FBE9"},"throttle":{}}],"description":"usage plan for dev","throttle":{"burstLimit":200,"rateLimit":100},"usagePlanName":"dev-docs-plan"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnUsagePlan","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.UsagePlan","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.189.1","metadata":[]}},"Query":{"id":"Query","path":"BackendStack/Query","children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/Query/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/Query/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/Query/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/Query/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/Query/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["bedrock:InvokeModel","bedrock:Retrieve","bedrock:RetrieveAndGenerate"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"QueryServiceRoleDefaultPolicy15FA4F38","roles":[{"Ref":"QueryServiceRole2FE01FD6"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Code":{"id":"Code","path":"BackendStack/Query/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/Query/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/Query/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/Query/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"c7064a7b8e999405c55fd834ec4750ff760c968077400b5bfc868713fa9af71c.zip"},"environment":{"variables":{"KNOWLEDGE_BASE_ID":{"Fn::GetAtt":["knowledgeBaseMyCfnKnowledgeBase53E2DA5C","KnowledgeBaseId"]}}},"functionName":"query-bedrock-llm","handler":"index.handler","role":{"Fn::GetAtt":["QueryServiceRole2FE01FD6","Arn"]},"runtime":"nodejs20.x","timeout":29}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.189.1","metadata":[]}},"DevIpSet":{"id":"DevIpSet","path":"BackendStack/DevIpSet","attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::IPSet","aws:cdk:cloudformation:props":{"addresses":[],"description":"List of allowed IP addresses","ipAddressVersion":"IPV4","scope":"REGIONAL"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnIPSet","version":"2.189.1"}},"WebACL":{"id":"WebACL","path":"BackendStack/WebACL","attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"defaultAction":{"block":{}},"rules":[{"name":"IPAllowList","priority":1,"statement":{"ipSetReferenceStatement":{"arn":{"Fn::GetAtt":["DevIpSet","Arn"]}}},"action":{"allow":{}},"visibilityConfig":{"sampledRequestsEnabled":true,"cloudWatchMetricsEnabled":true,"metricName":"IPAllowList"}}],"scope":"REGIONAL","visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"webACL","sampledRequestsEnabled":true}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.189.1"}},"awsWafLogs":{"id":"awsWafLogs","path":"BackendStack/awsWafLogs","children":{"Resource":{"id":"Resource","path":"BackendStack/awsWafLogs/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"aws-waf-logs-backend","retentionInDays":731}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.189.1","metadata":[]}},"WAFLoggingConfiguration":{"id":"WAFLoggingConfiguration","path":"BackendStack/WAFLoggingConfiguration","attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::LoggingConfiguration","aws:cdk:cloudformation:props":{"logDestinationConfigs":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:",{"Ref":"awsWafLogs58D3FD01"}]]}],"resourceArn":{"Fn::GetAtt":["WebACL","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnLoggingConfiguration","version":"2.189.1"}},"WebACLAssociation":{"id":"WebACLAssociation","path":"BackendStack/WebACLAssociation","attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACLAssociation","aws:cdk:cloudformation:props":{"resourceArn":{"Fn::Join":["",["arn:aws:apigateway:",{"Ref":"AWS::Region"},"::/restapis/",{"Ref":"rag8F750088"},"/stages/",{"Ref":"ragDeploymentStageprodFFA9FBE9"}]]},"webAclArn":{"Fn::GetAtt":["WebACL","Arn"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACLAssociation","version":"2.189.1"}},"APIGatewayUrl":{"id":"APIGatewayUrl","path":"BackendStack/APIGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.189.1"}},"DocsBucketName":{"id":"DocsBucketName","path":"BackendStack/DocsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.189.1"}},"FrontendBucket":{"id":"FrontendBucket","path":"BackendStack/FrontendBucket","children":{"Resource":{"id":"Resource","path":"BackendStack/FrontendBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"aws-cdk:cr-owned:8e1b7133","value":"true"}],"websiteConfiguration":{"indexDocument":"index.html"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.189.1"}},"Policy":{"id":"Policy","path":"BackendStack/FrontendBucket/Policy","children":{"Resource":{"id":"Resource","path":"BackendStack/FrontendBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"FrontendBucketEFE2E19C"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}]},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["OriginAccessIdentityDF1E3CAC","S3CanonicalUserId"]}},"Resource":[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.189.1","metadata":[]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"BackendStack/FrontendBucket/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"BackendStack/FrontendBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.189.1","metadata":[]}},"OriginAccessIdentity":{"id":"OriginAccessIdentity","path":"BackendStack/OriginAccessIdentity","children":{"Resource":{"id":"Resource","path":"BackendStack/OriginAccessIdentity/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Allows CloudFront to reach the bucket"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.189.1","metadata":[]}},"Distribution":{"id":"Distribution","path":"BackendStack/Distribution","children":{"Origin1":{"id":"Origin1","path":"BackendStack/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"Resource":{"id":"Resource","path":"BackendStack/Distribution/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::Select":[2,{"Fn::Split":["/",{"Fn::GetAtt":["FrontendBucketEFE2E19C","WebsiteURL"]}]}]},"id":"BackendStackDistributionOrigin166E1265C","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"http-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"BackendStackDistributionOrigin166E1265C","cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.189.1","metadata":[]}},"DeployFrontend":{"id":"DeployFrontend","path":"BackendStack/DeployFrontend","children":{"AwsCliLayer":{"id":"AwsCliLayer","path":"BackendStack/DeployFrontend/AwsCliLayer","children":{"Code":{"id":"Code","path":"BackendStack/DeployFrontend/AwsCliLayer/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/DeployFrontend/AwsCliLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/DeployFrontend/AwsCliLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/DeployFrontend/AwsCliLayer/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"content":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"8341cb239e4e1842be4d85a62c1b0a519b37f6f3b0e6acc9758db8a98f518fa3.zip"},"description":"/opt/awscli/aws"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.lambda_layer_awscli.AwsCliLayer","version":"2.189.1","metadata":[]}},"CustomResourceHandler":{"id":"CustomResourceHandler","path":"BackendStack/DeployFrontend/CustomResourceHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.189.1","metadata":[]}},"Asset1":{"id":"Asset1","path":"BackendStack/DeployFrontend/Asset1","children":{"Stage":{"id":"Stage","path":"BackendStack/DeployFrontend/Asset1/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/DeployFrontend/Asset1/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"CustomResource":{"id":"CustomResource","path":"BackendStack/DeployFrontend/CustomResource","children":{"Default":{"id":"Default","path":"BackendStack/DeployFrontend/CustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_deployment.BucketDeployment","version":"2.189.1"}},"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C":{"id":"Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C","children":{"ServiceRole":{"id":"ServiceRole","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.189.1","metadata":[]}},"Resource":{"id":"Resource","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.189.1"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"/*"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::",{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"}]]}]},{"Action":["s3:Abort*","s3:DeleteObject*","s3:GetBucket*","s3:GetObject*","s3:List*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}]},{"Action":["cloudfront:CreateInvalidation","cloudfront:GetInvalidation"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRoleDefaultPolicy88902FDF","roles":[{"Ref":"CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.189.1","metadata":[]}},"Code":{"id":"Code","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code","children":{"Stage":{"id":"Stage","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.189.1"}},"AssetBucket":{"id":"AssetBucket","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.189.1","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.189.1"}},"Resource":{"id":"Resource","path":"BackendStack/Custom::CDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756C/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"4fe0aba5e672b596d0f72505a9eec502f98d46906bb30fae2511fbdc1df4956f.zip"},"environment":{"variables":{"AWS_CA_BUNDLE":"/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem"}},"handler":"index.handler","layers":[{"Ref":"DeployFrontendAwsCliLayerD774ED8F"}],"role":{"Fn::GetAtt":["CustomCDKBucketDeployment8693BB64968944B69AAFB0CC9EB8756CServiceRole89A01265","Arn"]},"runtime":"python3.11","timeout":900}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.189.1","metadata":[]}},"CloudFrontURL":{"id":"CloudFrontURL","path":"BackendStack/CloudFrontURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.189.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"BackendStack/CDKMetadata","children":{"Default":{"id":"Default","path":"BackendStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.189.1"}},"Condition":{"id":"Condition","path":"BackendStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.189.1"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"BackendStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.189.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"BackendStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.189.1"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.189.1"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.189.1"}}}